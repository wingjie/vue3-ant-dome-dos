import{_ as a,d as e,t,E as o,G as l,o as n,h as s,l as r,B as d,u as i,g as m,i as f,a as u,w as p,F as c,A as v,c as y,H as D,q as w,I as _,C as M,D as g,J as b,r as U,j as k,K as h,y as x,L as $,f as I,M as A,N as C,b as q,m as O,O as F,P as S}from"./index.9007bae4.js";import{g as j,_ as L,i as R,m as N,a as E,b as H}from"./assign.63c28320.js";var P=a(e({__name:"SlotOut",props:{field:{type:null,required:!0}},setup(a){const e=a,{field:m}=t(e),f=o();return l("field",m),(a,e)=>(n(),s("div",null,[r(a.$slots,`${i(m).key}`,d(i(f),{field:i(m)}))]))}}),[["__file","/Users/wing/code/self/vue3-ant-dome-dos/src/common/components/SpaceUI/SForm/SlotOut.vue"]]);var B=a(e({__name:"SFormLayout",props:{modelData:{type:null,required:!0},fieldListMap:{type:Array,required:!0},formDataMap:{type:[Object,null],required:!0},formData:{type:Object,required:!0},rowMsg:{type:null,required:!0},name:{type:Array,required:!0}},setup(a){const e=a,l=o(),{modelData:b,formDataMap:U,formData:k,fieldListMap:h}=t(e),x=m((()=>U.value)),$=m((()=>k.value)),I=m((()=>j(h).filter((a=>!1!==j(a?.checked)))));return(e,t)=>{const o=f("a-col"),m=f("a-row");return n(),s("div",null,[u(m,M(g(i(b)?.rowAttr)),{default:p((()=>[(n(!0),s(c,null,v(i(I),((t,m)=>(n(),y(o,{key:t.key+m,span:t?.span||t?.colAttr?.span,style:D({display:m<(i(b).expandNum||i(I).length)?"block":"none",...i(b)?.colAttr?.style})},{default:p((()=>[t.type?(n(),s(c,{key:0},[w(' <a-row class="hint" style="width: 100%">\n            <a-col\n              v-if="field?.hint"\n              v-bind="field.formItemAttr?.labelCol || {}"\n              :style="{\n                display: \'flex\',\n                alignItems: \'center\',\n                justifyContent: \'flex-end\',\n              }"\n            >\n              <Hint\n                :title="field?.hint?.title"\n                :content="\n                  typeof field.hint === \'string\'\n                    ? field.hint\n                    : field.hint.content\n                "\n              ></Hint\n              >&nbsp;&nbsp;&nbsp;&nbsp;\n            </a-col>\n          </a-row> '),!t.type||"slot"!==t.type&&"slotOut"!==t.type?w("v-if",!0):(n(),y(P,{key:0,name:`${t.key}`,field:t,mapData:i(x),data:i($)},_({_:2},[v(e.$slots,((a,t)=>({name:t,fn:p((a=>[r(e.$slots,t,M(g(a)),void 0,!0)]))})))]),1032,["name","field","mapData","data"])),t.isForm?(n(),y(L,d({key:1,ref_for:!0,ref:"formItemRef"},{...i(l),...i(l)?.["onUpdate:formDataMap"]?{"onUpdate:mapData"(a){i(l)?.["onUpdate:formDataMap"]({...i(U),...a})}}:{},...i(l)?.["onUpdate:formData"]?{"onUpdate:rowData"(a){i(l)?.["onUpdate:formData"]({...i(k),...a})}}:{}},{field:t,fieldIndex:m,modelData:i(b),mapData:i(x),rowData:i($),formData:i($),isCore:Boolean(i(x)),rowMsg:a.rowMsg,name:[...a.name]}),_({itemIn:p((a=>[t.type&&"slot"===t.type?r(e.$slots,`${t.key}In`,{key:0,data:a.data,mapData:i(x),model:i(b),field:a.field},void 0,!0):w("v-if",!0)])),itemSlot:p((a=>["slot"===t?.config?.$type||"slot"===t?.config?.type?r(e.$slots,`${t.key}${t?.config?.key}In`,{key:0,data:a.data,model:i(b),field:a.field,mapData:i(x)},void 0,!0):w("v-if",!0)])),_:2},[v(e.$slots,((a,t)=>({name:t,fn:p((a=>[r(e.$slots,t,M(g(a)),void 0,!0)]))})))]),1040,["field","fieldIndex","modelData","mapData","rowData","formData","isCore","rowMsg","name"])):w("v-if",!0)],64)):w("v-if",!0)])),_:2},1032,["span","style"])))),128))])),_:3},16),u(m,null,{default:p((()=>[r(e.$slots,"formRow",{data:i(x)},void 0,!0)])),_:3})])}}}),[["__scopeId","data-v-19515894"],["__file","/Users/wing/code/self/vue3-ant-dome-dos/src/common/components/SpaceUI/SForm/SFormLayout.vue"]]);const V={class:"app-container"},z={id:"components-form-demo-advanced-search"};var G=a(e({__name:"index",props:{formModel:{type:null,required:!1,default:()=>({})},fieldList:{type:Array,required:!0,default:()=>[]},formData:{type:Object,required:!0,default:()=>({})},extra:{type:null,required:!1},name:{type:Array,required:!1}},setup(a,{expose:e}){const l=a,c=o(),D=b(),{formModel:w,fieldList:M,formData:g,name:j}=t(l),L=U(),P=U(),G=U({}),J=U([]),K=k({isForm:!0,formAttr:{labelCol:{span:8},wrapperCol:{span:24},labelWrap:!0,class:"ant-advanced-search-form",style:{},model:G.value},rowAttr:{gutter:[24,0]},colAttr:{span:8,style:{}},follow:!0,expandNum:void 0,formItemAttr:{labelCol:{span:6,offset:0}},config:{"auto-size":{minRows:1,maxRows:5},trim:!0,isShowFindCodeName:!0,isForm:!0,isCore:!0,disabled:!1,placeholder:"请填选","allow-clear":!0,maxlength:200,"max-tag-count":"responsive"}}),W=m((()=>j?.value));R(K,["disabled"]),h((()=>{Object.prototype.hasOwnProperty.call(w.value,"async")&&N(w.value,w.value.async)}));const Q=U({});function T(){const a=!1!==Q.value?.follow;return G.value=a?g.value:F(g.value),{formDataMap:G.value,formData:g.value}}function X(){aa(),G.value=null}function Y(){return Object.assign(g.value,G.value),X(),g.value}function Z(a,e){if(!1!==i(w.value.isForm))return new Promise((t=>{L.value.validate("array"===S(a)||"string"===S(a)?a:void 0).then((o=>{t({status:!0,data:{...o}}),"function"===S(a)&&a({status:!0,data:{...o}}),e&&e({status:!0,data:{...o}})})).catch((a=>{t({status:!1,data:{...a}}),e&&e({status:!1,data:{...a}})}))}))}function aa(a){L.value?.clearValidate(a)}x((()=>{R(w.value,["disabled","span","rules"]),Q.value=E({},$(K),$(w.value)),J.value=M.value.map((a=>H(a,Q.value)))})),I((()=>[Q.value.isForm,g.value]),(([a])=>{!0===a?T():X()}),{immediate:!0,deep:!0});const ea=k({options:{},unit:{}}),ta=U({confirm:Y,update:T,cancel:X}),oa={clearValidate:aa,getData:function(){return F(G.value)},validate:Z,findCodeItem:function(a,e){return P.value.findCodeItem(a,e)},update:T,cancel:X,confirm:Y,formRef:L,mapData:G},la=k({});return h((()=>{if(L.value){Object.keys(L.value).forEach((a=>{la[a]=L.value[a]}))}Object.keys(oa).forEach((a=>{la[a]=oa[a]}))})),e(la),(e,t)=>{const o=f("a-button"),l=f("a-form");return n(),s("div",V,[A(q("div",null,[u(o,{onClick:t[0]||(t[0]=a=>Z())},{default:p((()=>[O("校验测试")])),_:1}),u(o,{onClick:t[1]||(t[1]=a=>aa())},{default:p((()=>[O("清除校验测试")])),_:1})],512),[[C,!1]]),q("div",z,[i(W)?(n(),y(B,d({key:1},{...i(c),...i(c)?.["onUpdate:formData"]?{"onUpdate:formData"(a){i(c)?.["onUpdate:formData"]({...i(g),...a})},"onUpdate:formDataMap"(a){i(c)?.["onUpdate:formData"]({...i(g),...a})}}:{}},{modelData:i(Q),formData:i(g),formDataMap:i(G),fieldListMap:i(J),rowMsg:i(ea),name:i(j)?i(j):[]}),_({_:2},[v(i(D),((t,o)=>({name:o,fn:p((t=>[r(e.$slots,o,d({way:i(ta),extra:a.extra},{...t},{model:i(Q)}))]))})))]),1040,["modelData","formData","formDataMap","fieldListMap","rowMsg","name"])):(n(),y(l,d({key:0,ref_key:"formRef",ref:L},{...i(c),...i(Q).formAttr,...i(c).formAttr},{model:i(G)}),{default:p((()=>[u(B,d({...i(c),...i(c)?.["onUpdate:formData"]?{"onUpdate:formData"(a){i(c)?.["onUpdate:formData"]({...i(g),...a})},"onUpdate:formDataMap"(a){i(c)?.["onUpdate:formData"]({...i(g),...a})}}:{}},{modelData:i(Q),formData:i(g),formDataMap:i(G),fieldListMap:i(J),rowMsg:i(ea),name:i(j)?i(j):[]}),_({_:2},[v(i(D),((t,o)=>({name:o,fn:p((t=>[r(e.$slots,o,d({way:i(ta),extra:a.extra},t,{model:i(Q)}))]))})))]),1040,["modelData","formData","formDataMap","fieldListMap","rowMsg","name"])])),_:3},16,["model"])),r(e.$slots,"formOut",{data:i(G),model:i(w)})])])}}}),[["__file","/Users/wing/code/self/vue3-ant-dome-dos/src/common/components/SpaceUI/SForm/index.vue"]]);export{G as _};
