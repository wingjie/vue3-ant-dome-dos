import{_ as a,d as e,t,i as o,o as r,h as l,a as s,w as n,F as m,A as f,c as d,E as i,u,l as p,q as c,B as y,C as v,D,G as M,H as w,r as g,j as _,g as k,I as b,y as x,J as h,f as A,K as q,L as C,b as L,m as $,M as j,N as F}from"./index.2138ca2b.js";import{_ as I,i as O,m as N,a as R}from"./assignProp.cc6405ef.js";var S=a(e({__name:"sFormLayout",props:{modelData:{type:null,required:!0},fieldListMap:{type:Array,required:!0},formDataMap:{type:Object,required:!0},formData:{type:Object,required:!0},rowMsg:{type:null,required:!0},name:{type:Array,required:!0}},setup(a){const e=a,{modelData:M}=t(e);return(e,t)=>{const w=o("a-col"),g=o("a-row");return r(),l("div",null,[s(g,v(D(u(M)?.rowAttr)),{default:n((()=>[(r(!0),l(m,null,f(a.fieldListMap,((t,o)=>(r(),d(w,{key:t.key+o,span:t?.span||t?.colAttr?.span,style:i({display:o<(u(M).expandNum||a.fieldListMap.length)?"block":"none",...u(M)?.colAttr?.style})},{default:n((()=>[t.type?(r(),l(m,{key:0},[!t.type||"slot"!==t.type&&"slotOut"!==t.type?c("v-if",!0):p(e.$slots,`${t.key}`,{key:0,field:t,mapData:a.formDataMap,data:a.formData}),t.isForm?(r(),d(I,y({key:1,ref_for:!0,ref:"formItemRef"},{...e.$attrs},{field:t,fieldIndex:o,modelData:u(M),mapData:a.formDataMap.value||a.formData,rowData:a.formData,formData:a.formData,isCore:a.formDataMap.value&&t?.config?.isCore,rowMsg:a.rowMsg,name:[...a.name]}),{itemIn:n((o=>[t.type&&"slot"===t.type?p(e.$slots,`${t.key}In`,{key:0,data:o.data,mapData:a.formDataMap,model:u(M),field:o.field}):c("v-if",!0)])),itemSlot:n((o=>["slot"===t?.config?.type?p(e.$slots,`${t.key}${t?.config?.key}In`,{key:0,data:o.data,field:o.field,mapData:a.formDataMap}):c("v-if",!0)])),_:2},1040,["field","fieldIndex","modelData","mapData","rowData","formData","isCore","rowMsg","name"])):c("v-if",!0)],64)):c("v-if",!0)])),_:2},1032,["span","style"])))),128))])),_:3},16),s(g,null,{default:n((()=>[p(e.$slots,"formRow",{data:a.formDataMap})])),_:3})])}}}),[["__file","/Users/wing/code/galaxy-halo/src/common/components/SForm/sFormLayout.vue"]]);const E={class:"app-container"},P={id:"components-form-demo-advanced-search"};var U=a(e({__name:"index",props:{formModel:{type:null,required:!1,default:()=>({})},fieldList:{type:Array,required:!0,default:()=>[]},formData:{type:Object,required:!0,default:()=>({})},extra:{type:null,required:!1},name:{type:Array,required:!1,default:()=>[]}},setup(a,{expose:e}){const m=a,i=M(),c=w(),{formModel:v,fieldList:D,formData:I,name:U}=t(m),V=g(),B=g(),G=_({value:null}),H=g([]),J=_({isForm:!0,formAttr:{labelCol:{span:8},wrapperCol:{span:14},labelWrap:!0,class:"ant-advanced-search-form",style:{},model:G.value},rowAttr:{gutter:[24,0]},colAttr:{span:8,style:{}},follow:!0,expandNum:void 0,formItemAttr:{labelCol:{span:6,offset:0}},config:{isShowFindCodeName:!0,isForm:!0,disabled:!1,placeholder:"请填选","allow-clear":!0,maxlength:200}}),K=k((()=>U.value.length));O(J,["disabled"]),b((()=>{Object.prototype.hasOwnProperty.call(v.value,"async")&&N(v.value,v.value.async)}));const W=_({});function z(){const a=!1!==W?.follow;return G.value=a?I.value:F(I.value),{formDataMap:G.value,formData:I.value}}function Q(){Y(),G.value=null}function T(){return Object.assign(I.value,G.value),Q(),I.value}function X(a,e){return new Promise((t=>{V.value.validate(a).then((a=>{t({status:!0,data:{...a}}),e&&e({status:!0,data:{...a}})})).catch((a=>{t({status:!1,data:{...a}}),e&&e({status:!1,data:{...a}})}))}))}function Y(a){V.value?.clearValidate(a)}x((()=>{O(v.value,["disabled","span","rules"]),h(W,J,v.value),H.value=D.value.map((a=>R(a,W)))})),A((()=>[W.isForm,I.value]),(([a])=>{!0===a?z():Q()}),{immediate:!0,deep:!0});const Z=_({options:{},unit:{}}),aa=g({confirm:T,update:z,cancel:Q}),ea={clearValidate:Y,getData:function(){return F(G.value)},validate:X,findCodeItem:function(a,e){return B.value.findCodeItem(a,e)},update:z,cancel:Q,confirm:T,formRef:V,mapData:G},ta=_({});return b((()=>{if(V.value){Object.keys(V.value).forEach((a=>{ta[a]=V.value[a]}))}Object.keys(ea).forEach((a=>{ta[a]=ea[a]}))})),e(ta),(e,t)=>{const m=o("a-button"),D=o("a-form");return r(),l("div",E,[q(L("div",null,[s(m,{onClick:t[0]||(t[0]=a=>X())},{default:n((()=>[$("校验测试")])),_:1}),s(m,{onClick:t[1]||(t[1]=a=>Y())},{default:n((()=>[$("清除校验测试")])),_:1})],512),[[C,!1]]),L("div",P,[u(K)?(r(),d(S,{key:1,modelData:u(W),formData:u(I),formDataMap:u(G),fieldListMap:u(H),rowMsg:u(Z),name:u(U)},j({_:2},[f(u(c),((t,o)=>({name:o,fn:n((t=>[p(e.$slots,o,y({model:u(W),way:u(aa),extra:a.extra},t))]))})))]),1032,["modelData","formData","formDataMap","fieldListMap","rowMsg","name"])):(r(),d(D,y({key:0,ref_key:"formRef",ref:V},{...u(i),...u(W).formAttr,...u(i).formAttr},{model:u(G).value}),{default:n((()=>[s(S,{modelData:u(W),formData:u(I),formDataMap:u(G),fieldListMap:u(H),rowMsg:u(Z),name:u(U)},j({_:2},[f(u(c),((t,o)=>({name:o,fn:n((t=>[p(e.$slots,o,y({model:u(W),way:u(aa),extra:a.extra},t))]))})))]),1032,["modelData","formData","formDataMap","fieldListMap","rowMsg","name"])])),_:3},16,["model"])),p(e.$slots,"formOut",{data:u(G).value,model:u(v)})])])}}}),[["__file","/Users/wing/code/galaxy-halo/src/common/components/SForm/index.vue"]]);export{U as _};
