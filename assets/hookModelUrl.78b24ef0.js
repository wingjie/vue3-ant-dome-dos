import{_ as e}from"./index.ca0dcf97.js";import{_ as A}from"./index.e76cf722.js";import{_ as a}from"./ios-add-circle-outline.dd61c41d.js";import{r as t,g as l,f as o,_ as r,d as E,j as n,i,o as u,h as s,a as C,w as B,B as c,u as d,m as p,b as D,p as m}from"./index.0aa131dc.js";import"./assign.d33290b3.js";import"./index.7d12c3dd.js";const f={style:{"text-align":"center"}};var v=r(E({__name:"hookModelUrl",setup(r,{expose:E}){const[v,g]=function(){const e=t(null),A=t(""),a=t([]),r=l({get:()=>A.value,set(t){e.value="url",A.value=t;let l="";/.*\?/.test(t)&&(l=t.replace(/.*\?/,"")||"");const o=l?l?.split("&"):[];a.value=o?.map((e=>{const[A,a]=e.split("=");return{key:A,value:a}}))||[]}});return o((()=>a.value),(a=>{if("url"===e.value)return void(e.value=null);if(0===a.length)return void(A.value.includes("?")?A.value=A.value.replace(/\?.*/,""):A.value="");const t=a?.map((({key:e,value:A})=>A?`${e}=${A}`:`${e||""}${A||""}`)),l=t.length?t.join("&"):"";a.length&&(A.value.includes("?")?A.value=A.value.replace(/(?<=\?).*/,"")+l:A.value=`${A.value}?${l}`),A.value=A.value.includes("?")?A.value:`?${A.value}`}),{deep:!0,flush:"post"}),[r,a]}(),y=t(),F=n({formData:{url:v,arg:g},fieldList:[{label:"url",key:"url",type:"input"},{label:"参数",key:"arg",type:"slot"},{label:" ",key:"validate",type:"slot"}],formModel:{span:24,rules:{url:[{required:!0,trigger:"change",message:"不能为空"}]}}}),k=n({tableData:g,columns:[{title:"key",key:"key",type:"input"},{title:"value",key:"value",type:"input"},{title:"操作",key:"operation",type:"slot",align:"center",slotHead:!0}],fieldModel:{isForm:!0,follow:!0,rules:{key:[{required:!0,trigger:"change",message:"不能为空"}],value:[{required:!0,trigger:"change",message:"不能为空"}]},tableAttr:{pagination:!1},config:{isForm:!0}}});function b(){y.value.validate().then((e=>{}))}function h(){g.value.push({key:"",value:""})}return E({originCode:"%3Ctemplate%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3CSForm%20v-bind%3D%22form%22%20ref%3D%22formRef%22%3E%0A%20%20%20%20%20%20%3Ctemplate%20%23argIn%3E%0A%20%20%20%20%20%20%20%20%3CSTable%20v-bind%3D%22table%22%20%3Aname%3D%22%5B'arg'%5D%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctemplate%20%23header-operation%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ca-space%20%3Asize%3D%228%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%E6%93%8D%E4%BD%9C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ci-ion-ios-add-circle-outline%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%40click%3D%22add%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20style%3D%22cursor%3A%20pointer%3B%20font-size%3A%2016px%3B%20color%3A%20%23108de9%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fa-space%3E%0A%20%20%20%20%20%20%20%20%20%20%3C%2Ftemplate%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctemplate%20%23operationIn%3D%22data%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ca-button%20%40click%3D%22add%22%3E%2B%3C%2Fa-button%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ca-button%20%40click%3D%22cutDown(data)%22%3E-%3C%2Fa-button%3E%0A%20%20%20%20%20%20%20%20%20%20%3C%2Ftemplate%3E%0A%20%20%20%20%20%20%20%20%3C%2FSTable%3E%0A%20%20%20%20%20%20%3C%2Ftemplate%3E%0A%20%20%20%20%20%20%3Ctemplate%20%23validateIn%3E%0A%20%20%20%20%20%20%20%20%3Ca-button%20type%3D%22primary%22%20%40click%3D%22validateFn%22%3E%20%E6%A0%A1%E9%AA%8C%20%3C%2Fa-button%3E%0A%20%20%20%20%20%20%3C%2Ftemplate%3E%0A%20%20%20%20%3C%2FSForm%3E%0A%20%20%20%20%3Cdiv%20style%3D%22text-align%3A%20center%22%3E%0A%20%20%20%20%20%20%3Cp%3Eurl%3A%20%7B%7B%20url%20%7D%7D%3C%2Fp%3E%0A%20%20%20%20%20%20%3Cp%3Eobj%3A%20%7B%7B%20form.formData.arg%20%7D%7D%3C%2Fp%3E%0A%20%20%20%20%3C%2Fdiv%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Ftemplate%3E%0A%3Cscript%20setup%20lang%3D%22ts%22%3E%0Aimport%20map%20from%20'%40%2Fcommon%2Fhook%2FurlMapQuery'%0A%0Aconst%20%5Burl%2C%20obj%5D%3A%20any%20%3D%20map()%0Aconst%20formRef%20%3D%20ref()%0Aconst%20form%20%3D%20reactive(%7B%0A%20%20formData%3A%20%7B%0A%20%20%20%20url%2C%0A%20%20%20%20arg%3A%20obj%2C%0A%20%20%7D%2C%0A%20%20fieldList%3A%20%5B%0A%20%20%20%20%7B%20label%3A%20'url'%2C%20key%3A%20'url'%2C%20type%3A%20'input'%20%7D%2C%0A%20%20%20%20%7B%20label%3A%20'%E5%8F%82%E6%95%B0'%2C%20key%3A%20'arg'%2C%20type%3A%20'slot'%20%7D%2C%0A%20%20%20%20%7B%20label%3A%20'%20'%2C%20key%3A%20'validate'%2C%20type%3A%20'slot'%20%7D%2C%0A%20%20%5D%2C%0A%20%20formModel%3A%20%7B%0A%20%20%20%20span%3A%2024%2C%0A%20%20%20%20rules%3A%20%7B%0A%20%20%20%20%20%20url%3A%20%5B%7B%20required%3A%20true%2C%20trigger%3A%20'change'%2C%20message%3A%20'%E4%B8%8D%E8%83%BD%E4%B8%BA%E7%A9%BA'%20%7D%5D%2C%0A%20%20%20%20%7D%2C%0A%20%20%7D%2C%0A%7D)%0Aconst%20table%20%3D%20reactive(%7B%0A%20%20tableData%3A%20obj%2C%0A%20%20columns%3A%20%5B%0A%20%20%20%20%7B%20title%3A%20'key'%2C%20key%3A%20'key'%2C%20type%3A%20'input'%20%7D%2C%0A%20%20%20%20%7B%20title%3A%20'value'%2C%20key%3A%20'value'%2C%20type%3A%20'input'%20%7D%2C%0A%20%20%20%20%7B%0A%20%20%20%20%20%20title%3A%20'%E6%93%8D%E4%BD%9C'%2C%0A%20%20%20%20%20%20key%3A%20'operation'%2C%0A%20%20%20%20%20%20type%3A%20'slot'%2C%0A%20%20%20%20%20%20align%3A%20'center'%2C%0A%20%20%20%20%20%20slotHead%3A%20true%2C%0A%20%20%20%20%7D%2C%0A%20%20%5D%2C%0A%20%20fieldModel%3A%20%7B%0A%20%20%20%20isForm%3A%20true%2C%0A%20%20%20%20follow%3A%20true%2C%0A%20%20%20%20rules%3A%20%7B%0A%20%20%20%20%20%20key%3A%20%5B%7B%20required%3A%20true%2C%20trigger%3A%20'change'%2C%20message%3A%20'%E4%B8%8D%E8%83%BD%E4%B8%BA%E7%A9%BA'%20%7D%5D%2C%0A%20%20%20%20%20%20value%3A%20%5B%7B%20required%3A%20true%2C%20trigger%3A%20'change'%2C%20message%3A%20'%E4%B8%8D%E8%83%BD%E4%B8%BA%E7%A9%BA'%20%7D%5D%2C%0A%20%20%20%20%7D%2C%0A%20%20%20%20tableAttr%3A%20%7B%0A%20%20%20%20%20%20pagination%3A%20false%2C%0A%20%20%20%20%7D%2C%0A%20%20%20%20config%3A%20%7B%0A%20%20%20%20%20%20isForm%3A%20true%2C%0A%20%20%20%20%7D%2C%0A%20%20%7D%2C%0A%7D)%0Afunction%20validateFn()%20%7B%0A%20%20console.log('formRef'%2C%20formRef.value.validate())%0A%20%20formRef.value.validate().then((res%3A%20any)%20%3D%3E%20%7B%0A%20%20%20%20console.log('formRef%20res%20validate'%2C%20res)%0A%20%20%7D)%0A%7D%0Afunction%20add()%20%7B%0A%20%20console.log('table'%2C%20obj.value)%0A%20%20obj.value.push(%7B%20key%3A%20''%2C%20value%3A%20''%20%7D)%0A%7D%0Afunction%20cutDown(data%3A%20any)%20%7B%0A%20%20console.log('data'%2C%20data)%0A%20%20obj.value.splice(data.scope.index%2C%201)%0A%7D%0Aconst%20%24config%20%3D%20ref(%7B%0A%20%20title%3A%20'SForm%E5%B5%8C%E5%A5%97STable%E3%80%81%EF%BC%88hook%3AurlMapQuery%EF%BC%89query%E5%8F%82%E6%95%B0%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A'%2C%0A%20%20order%3A%203%2C%0A%20%20context%3A%0A%20%20%20%20'%E4%BD%BF%E7%94%A8%E8%BF%99%E7%A7%8D%E5%B5%8C%E5%A5%97%E6%98%AF%E5%BA%94%E5%AF%B9%E5%A4%9A%E5%B1%82%E7%BA%A7%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84form%E8%A1%A8%E5%8D%95%E5%B5%8C%E5%A5%97table%E8%A1%A8%E6%A0%BC%E7%9A%84%E5%9C%BA%E6%99%AF%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%BF%9B%E8%A1%8C%E4%B8%80%E6%AC%A1%E6%80%A7%E6%A0%A1%E9%AA%8C%E3%80%82%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%E5%B1%9E%E6%80%A7name%E8%A1%A8%E8%BF%B0%E6%B8%85%E6%A5%9A%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%82hook%E7%9A%84%E7%94%A8%E6%B3%95(url%E8%B7%AF%E5%BE%84%E7%9A%84query%E5%8F%82%E6%95%B0%E5%92%8C%E8%B7%AF%E5%BE%84%E5%92%8C%E8%A1%A8%E5%8D%95%E5%AF%B9%E5%83%8F%E7%9A%84%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A)%E3%80%82'%2C%0A%7D)%0AdefineExpose(%7B%0A%20%20%24config%2C%0A%7D)%0A%3C%2Fscript%3E%0A%3Cstyle%20scoped%20lang%3D%22scss%22%3E%3C%2Fstyle%3E%0A",$config:t({title:"SForm嵌套STable、（hook:urlMapQuery）query参数双向绑定",order:3,context:"使用这种嵌套是应对多层级数据结构form表单嵌套table表格的场景，可以进行一次性校验。需要使用属性name表述清楚数据结构。hook的用法(url路径的query参数和路径和表单对像的双向绑定)。"})}),(t,l)=>{const o=a,r=i("a-space"),E=i("a-button"),n=A,j=e;return u(),s("div",null,[C(j,c(d(F),{ref_key:"formRef",ref:y}),{argIn:B((()=>[C(n,c(d(k),{name:["arg"]}),{"header-operation":B((()=>[C(r,{size:8},{default:B((()=>[p(" 操作 "),C(o,{onClick:h,style:{cursor:"pointer","font-size":"16px",color:"#108de9"}})])),_:1})])),operationIn:B((e=>[C(E,{onClick:h},{default:B((()=>[p("+")])),_:1}),C(E,{onClick:A=>function(e){g.value.splice(e.scope.index,1)}(e)},{default:B((()=>[p("-")])),_:2},1032,["onClick"])])),_:1},16)])),validateIn:B((()=>[C(E,{type:"primary",onClick:b},{default:B((()=>[p(" 校验 ")])),_:1})])),_:1},16),D("div",f,[D("p",null,"url: "+m(d(v)),1),D("p",null,"obj: "+m(d(F).formData.arg),1)])])}}}),[["__file","/Users/wing/code/self/vue3-ant-dome-dos/src/views/sform/automation/hookModelUrl.vue"]]);export{v as default};
